<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.14">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-02-08">
<meta name="description" content="Tasty R snacks that do useful things in Political Networks Analysis">

<title>slinberg.net - Useful R tidbits: Political Networks Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-0ZXRPNMLL7"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-0ZXRPNMLL7', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../../styles.css">
<meta name="twitter:title" content="slinberg.net - Useful R tidbits: Political Networks Analysis">
<meta name="twitter:description" content="Tasty R snacks that do useful things in Political Networks Analysis">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">slinberg.net</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../../../" rel=""><i class="bi bi-house" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../steve.html" rel="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../blog.html" rel="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../academics.html" rel="">
 <span class="menu-text">Academics</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://fosstodon.org/@stevelinberg" rel=""><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/stevelinberg" rel=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/slinberg/" rel=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/stevelinberg" rel=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://stackoverflow.com/users/13603796/stevelinberg" rel=""><i class="bi bi-stack-overflow" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:steve@slinberg.net" rel=""><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../../index.xml" rel=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
                  <a href="" class="quarto-reader-toggle nav-link" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Useful R tidbits: Political Networks Analysis</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../academics/695M/index.html" class="sidebar-item-text sidebar-link">695M - Machine Learning</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../academics/695M/glossary/index.html" class="sidebar-item-text sidebar-link">Glossary</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../academics/695M/useful-r-tidbits/index.html" class="sidebar-item-text sidebar-link">Useful R tidbits: Machine Learning</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../academics/695M/bigger-concepts/index.html" class="sidebar-item-text sidebar-link">Bigger Concepts</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../academics/697E/index.html" class="sidebar-item-text sidebar-link">697E - Political Networks Analysis</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../academics/697E/glossary/index.html" class="sidebar-item-text sidebar-link">Glossary</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../academics/697E/useful-r-tidbits/index.html" class="sidebar-item-text sidebar-link active">Useful R tidbits: Political Networks Analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../academics/697E/697E-hw3/index.html" class="sidebar-item-text sidebar-link">Homework 3: The Florentine Wedding dataset</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../academics/697E/697E-hw4/index.html" class="sidebar-item-text sidebar-link">Homework 4: Centrality Analysis of the Florentine Wedding dataset</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../academics/697E/697E-hw5/index.html" class="sidebar-item-text sidebar-link">Homework 5: Constraint and Brokerage in the Florentine Wedding dataset</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../academics/697E/697E-hw6/index.html" class="sidebar-item-text sidebar-link">Homework 6: Clustering and Blockmodels in the Florentine Wedding dataset</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#prelude-finding-data-to-play-with" id="toc-prelude-finding-data-to-play-with" class="nav-link active" data-scroll-target="#prelude-finding-data-to-play-with">Prelude: finding data to play with</a></li>
  <li><a href="#week-1-tutorial-cheatsheet" id="toc-week-1-tutorial-cheatsheet" class="nav-link" data-scroll-target="#week-1-tutorial-cheatsheet">Week 1 tutorial cheatsheet</a>
  <ul class="collapse">
  <li><a href="#getting-the-basic-network-descriptors" id="toc-getting-the-basic-network-descriptors" class="nav-link" data-scroll-target="#getting-the-basic-network-descriptors">Getting the basic network descriptors</a></li>
  </ul></li>
  <li><a href="#week-2-cheatsheet" id="toc-week-2-cheatsheet" class="nav-link" data-scroll-target="#week-2-cheatsheet">Week 2 cheatsheet</a>
  <ul class="collapse">
  <li><a href="#transitivity" id="toc-transitivity" class="nav-link" data-scroll-target="#transitivity">Transitivity</a></li>
  </ul></li>
  <li><a href="#degree" id="toc-degree" class="nav-link" data-scroll-target="#degree">Degree</a>
  <ul class="collapse">
  <li><a href="#indegree-and-outdegree-calculations" id="toc-indegree-and-outdegree-calculations" class="nav-link" data-scroll-target="#indegree-and-outdegree-calculations"><em>Indegree</em> and <em>outdegree</em> calculations</a></li>
  </ul></li>
  <li><a href="#components" id="toc-components" class="nav-link" data-scroll-target="#components">Components</a></li>
  <li><a href="#graph-density" id="toc-graph-density" class="nav-link" data-scroll-target="#graph-density">Graph density</a></li>
  <li><a href="#network-degree-centralization" id="toc-network-degree-centralization" class="nav-link" data-scroll-target="#network-degree-centralization">Network degree centralization</a>
  <ul class="collapse">
  <li><a href="#eigenvector-centralization" id="toc-eigenvector-centralization" class="nav-link" data-scroll-target="#eigenvector-centralization">Eigenvector centralization</a></li>
  <li><a href="#bonacich-power-centrality" id="toc-bonacich-power-centrality" class="nav-link" data-scroll-target="#bonacich-power-centrality">Bonacich Power Centrality</a></li>
  <li><a href="#derived-and-reflected-centrality" id="toc-derived-and-reflected-centrality" class="nav-link" data-scroll-target="#derived-and-reflected-centrality">Derived and Reflected Centrality</a></li>
  </ul></li>
  <li><a href="#week-5-big-block-of-basic-code" id="toc-week-5-big-block-of-basic-code" class="nav-link" data-scroll-target="#week-5-big-block-of-basic-code">Week 5: Big Block of Basic Code</a>
  <ul class="collapse">
  <li><a href="#closeness-centrailty" id="toc-closeness-centrailty" class="nav-link" data-scroll-target="#closeness-centrailty">Closeness centrailty</a></li>
  <li><a href="#closeness-centralization" id="toc-closeness-centralization" class="nav-link" data-scroll-target="#closeness-centralization">Closeness centralization</a></li>
  <li><a href="#betweenness-centrality" id="toc-betweenness-centrality" class="nav-link" data-scroll-target="#betweenness-centrality">Betweenness centrality</a></li>
  <li><a href="#betweenness-centralization" id="toc-betweenness-centralization" class="nav-link" data-scroll-target="#betweenness-centralization">Betweenness centralization</a></li>
  <li><a href="#burts-network-constraint" id="toc-burts-network-constraint" class="nav-link" data-scroll-target="#burts-network-constraint">(Burt’s) network constraint</a></li>
  <li><a href="#gould-fernandez-brokerage" id="toc-gould-fernandez-brokerage" class="nav-link" data-scroll-target="#gould-fernandez-brokerage">Gould-Fernandez Brokerage</a></li>
  </ul></li>
  <li><a href="#week-6" id="toc-week-6" class="nav-link" data-scroll-target="#week-6">Week 6</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/stevelinberg/quarto-blog/edit/main/academics/697E/useful-r-tidbits/index.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/stevelinberg/quarto-blog/issues/new" class="toc-action">Report an issue</a></p><p><a href="https://github.com/stevelinberg/quarto-blog/blob/main/academics/697E/useful-r-tidbits/index.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Useful R tidbits: Political Networks Analysis</h1>
  <div class="quarto-categories">
    <div class="quarto-category">r</div>
    <div class="quarto-category">social networks</div>
  </div>
  </div>

<div>
  <div class="description">
    <p>Tasty R snacks that do useful things in Political Networks Analysis</p>
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 8, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>This document contains R snippets pertaining to work in the <a href="../../../academics/697E/index.html">Political Networks Analysis class</a>. There is also <a href="../../../academics/695M/useful-r-tidbits/index.html">one for the Machine Learning class</a>.</p>
<section id="prelude-finding-data-to-play-with" class="level2">
<h2 class="anchored" data-anchor-id="prelude-finding-data-to-play-with">Prelude: finding data to play with</h2>
<p>Since in the class tutorials, the network objects are pre-loaded in the web-based runtime environments, we don’t actually see how to load some of the data sets that the exercises are based on, for running outside of this environment.</p>
<p>There are gazillions of ways to get data into R, but for the purposes of playing with networks, there are some packages with pre-existing network data that can be easily loaded. Two of these are <code>igraphdata</code>, which contains igraph-formatted network datasets, and <code>ergm</code>, which contains statnet-compatible network datasets.</p>
<p>The datasets in each can be listed with the <code>data</code> command:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">data</span>(<span class="at">package =</span> <span class="st">"igraphdata"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>Data sets <span class="cf">in</span> package ‘igraphdata’<span class="sc">:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>Koenigsberg              Bridges of Koenigsberg from Euler<span class="st">'s times</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="st">UKfaculty                Friendship network of a UK university faculty</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="st">USairports               US airport network, 2010 December</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="st">enron                    Enron Email Network</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="st">foodwebs                 A collection of food webs</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="st">immuno                   Immunoglobulin interaction network</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="st">karate                   Zachary'</span>s karate club network</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>kite                     Krackhardt<span class="st">'s kite</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="st">macaque                  Visuotactile brain areas and connections</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="st">rfid                     Hospital encounter network data</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="st">yeast                    Yeast protein interaction network</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="st">&gt; data(package = "ergm")</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="st">Data sets in package ‘ergm’:</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="st">cohab_MixMat (cohab)     Target statistics and model fit to a hypothetical</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="st">                         50,000-node network population with 50,000 nodes</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="st">                         based on egocent</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="st">cohab_PopWts (cohab)     Target statistics and model fit to a hypothetical</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="st">                         50,000-node network population with 50,000 nodes</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="st">                         based on egocent</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="st">cohab_TargetStats (cohab)</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="st">                         Target statistics and model fit to a hypothetical</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="st">                         50,000-node network population with 50,000 nodes</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="st">                         based on egocent</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="st">ecoli1 (ecoli)           Two versions of an E. Coli network dataset</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="st">ecoli2 (ecoli)           Two versions of an E. Coli network dataset</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="st">faux.desert.high         Faux desert High School as a network object</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="st">faux.dixon.high          Faux dixon High School as a network object</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="st">faux.magnolia.high       Goodreau'</span>s Faux Magnolia High School as a network</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>                         object</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>faux.mesa.high           Goodreau<span class="st">'s Faux Mesa High School as a network</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="st">                         object</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="st">flobusiness (florentine)</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="st">                         Florentine Family Marriage and Business Ties Data</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="st">                         as a "network" object</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="st">flomarriage (florentine)</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="st">                         Florentine Family Marriage and Business Ties Data</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="st">                         as a "network" object</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="st">g4                       Goodreau'</span>s four node network as a <span class="st">"network"</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>                         object</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>kapferer                 Kapferer<span class="st">'s tailor shop data</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="st">kapferer2 (kapferer)     Kapferer'</span>s tailor shop data</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>molecule                 Synthetic network with <span class="dv">20</span> nodes and <span class="dv">28</span> edges</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="fu">samplike</span> (sampson)       Cumulative network of positive affection within a</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>                         monastery as a <span class="st">"network"</span> object</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="fu">samplk1</span> (samplk)         Longitudinal networks of positive affection</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>                         within a monastery as a <span class="st">"network"</span> object</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="fu">samplk2</span> (samplk)         Longitudinal networks of positive affection</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>                         within a monastery as a <span class="st">"network"</span> object</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="fu">samplk3</span> (samplk)         Longitudinal networks of positive affection</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>                         within a monastery as a <span class="st">"network"</span> object</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To load the statnet “florentine” data from the <code>ergm</code> package:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">data</span>(<span class="st">"florentine"</span>, <span class="at">package =</span> <span class="st">"ergm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This creates the objects <code>flobusiness</code> and <code>flomarriage</code>, both from this dataset, ready to go in statnet. Note that another version of this dataset is found in the <code>network</code> package <code>flo</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"flo"</span>, <span class="at">package =</span> <span class="st">"network"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This loads the very simple data into a matrix, but it is not yet a network object. To convert it to an igraph object:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(network)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(flo)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>ntwk.ig <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(flo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="week-1-tutorial-cheatsheet" class="level2">
<h2 class="anchored" data-anchor-id="week-1-tutorial-cheatsheet">Week 1 tutorial cheatsheet</h2>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th>igraph</th>
<th>statnet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Count of vertices</td>
<td><code>vcount()</code></td>
<td></td>
</tr>
<tr class="even">
<td>Count of edges</td>
<td><code>ecount()</code></td>
<td></td>
</tr>
<tr class="odd">
<td>Both</td>
<td></td>
<td><code>print()</code></td>
</tr>
<tr class="even">
<td>Bipartite or single mode?</td>
<td><code>is_bipartite()</code></td>
<td><code>print()</code></td>
</tr>
<tr class="odd">
<td>Edges directed or undirected?</td>
<td><code>is_directed()</code></td>
<td><code>print()</code></td>
</tr>
<tr class="even">
<td>Weighted? (or binary)</td>
<td><code>is_weighted()</code></td>
<td><code>print()</code></td>
</tr>
</tbody>
</table>
<dl>
<dt>vertex attribute</dt>
<dd>
vector of additional information about nodes in a network
</dd>
<dt>edge attribute</dt>
<dd>
vector of additional information about the edges in a network
</dd>
</dl>
<p>Q: how to get missing edge count in igraph?</p>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>igraph</th>
<th>statnet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>display vertex attributes</td>
<td><code>vertex_attr_names()</code></td>
<td><code>list.vertex.attributes()</code></td>
</tr>
<tr class="even">
<td>display edge attributes</td>
<td><code>edge_attr_names()</code></td>
<td><code>list.edge.attributes()</code></td>
</tr>
</tbody>
</table>
<p>In igraph, attributes are accessed via <code>$</code>, using the <code>V</code> and <code>E</code> functions, as in:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(karate.ig)<span class="sc">$</span>name</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(karate.ig)<span class="sc">$</span>weight</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In statnet, they are accessed via the <code>%v%</code> and <code>%e%</code> mechanisms, as in:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>karate.stat <span class="sc">%v%</span> <span class="st">"vertex.names"</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>karate.stat <span class="sc">%e%</span> <span class="st">"weight"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="getting-the-basic-network-descriptors" class="level3">
<h3 class="anchored" data-anchor-id="getting-the-basic-network-descriptors">Getting the basic network descriptors</h3>
<p>First look at any network is to examine the network <em>size</em>, <em>type</em> (un/directed, un/weighted, bipartite) and available <em>attributes of vertices and edges</em>.</p>
<section id="igraph" class="level4">
<h4 class="anchored" data-anchor-id="igraph">igraph</h4>
<p>Basic descriptors first:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vcount</span>(climpref.ig)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">34</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ecount</span>(climpref.ig)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">531</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">is_bipartite</span>(climpref.ig)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">is_directed</span>(climpref.ig)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="fu">is_weighted</span>(climpref.ig)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Listing vertex and edge attributes:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">vertex_attr_names</span>(climpref.ig)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"name"</span>                 <span class="st">"Climate.council"</span>      <span class="st">"Klimaallianz"</span>        </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>] <span class="st">"Stiftung.Klimarappen"</span> <span class="st">"type3"</span>                <span class="st">"type5"</span>               </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">7</span>] <span class="st">"dm"</span>                  </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">edge_attr_names</span>(climpref.ig)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"weight"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Accessing vertex and edge attributes:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">V</span>(climpref.ig)<span class="sc">$</span>name <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"AA"</span> <span class="st">"AB"</span> <span class="st">"AC"</span> <span class="st">"AD"</span> <span class="st">"AE"</span> <span class="st">"AF"</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(climpref.ig)<span class="sc">$</span>weight <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.69</span> <span class="fl">0.08</span> <span class="fl">0.04</span> <span class="fl">0.18</span> <span class="fl">0.42</span> <span class="fl">0.21</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="statnet" class="level4">
<h4 class="anchored" data-anchor-id="statnet">statnet</h4>
<p>The basic descriptors in statnet are all <em>shown</em> by print():</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">print</span>(flobusiness)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a> Network attributes<span class="sc">:</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  vertices <span class="ot">=</span> <span class="dv">16</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  directed <span class="ot">=</span> <span class="cn">FALSE</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  hyper <span class="ot">=</span> <span class="cn">FALSE</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  loops <span class="ot">=</span> <span class="cn">FALSE</span> </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  multiple <span class="ot">=</span> <span class="cn">FALSE</span> </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  bipartite <span class="ot">=</span> <span class="cn">FALSE</span> </span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  total edges<span class="ot">=</span> <span class="dv">15</span> </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    missing edges<span class="ot">=</span> <span class="dv">0</span> </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    non<span class="sc">-</span>missing edges<span class="ot">=</span> <span class="dv">15</span> </span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a> Vertex attribute names<span class="sc">:</span> </span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    priorates totalties vertex.names wealth </span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>No edge attributes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>It appears, though it’s thinly documented, that these attributes are programmatically accessible through the <code>$gal</code> attribute, as in <code>is_directed &lt;- flobusiness$gal$directed</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> flobusiness<span class="sc">$</span>gal</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>n</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">16</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>mnext</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">16</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>directed</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>hyper</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>loops</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>multiple</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>bipartite</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="week-2-cheatsheet" class="level2">
<h2 class="anchored" data-anchor-id="week-2-cheatsheet">Week 2 cheatsheet</h2>
<p>A dyad census will count the reciprocal (<code>mut</code>), asymmetric (<code>asym</code>) and absent (<code>null</code>) dyads, based on directed graphs. In igraph:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">dyad.census</span>(trade2007.ig)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>mut</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">11444</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>asym</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3148</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>null</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2244</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In statnet:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>sna<span class="sc">::</span><span class="fu">dyad.census</span>()</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>]   <span class="dv">6225</span>  <span class="dv">19035</span>  <span class="dv">40611</span>   <span class="dv">6442</span>   <span class="dv">7044</span>  <span class="dv">10097</span>  <span class="dv">55355</span>  <span class="dv">44966</span>   <span class="dv">9200</span>   <span class="dv">1876</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">11</span>] <span class="dv">146537</span>  <span class="dv">25578</span>  <span class="dv">17167</span>  <span class="dv">30894</span> <span class="dv">225908</span> <span class="dv">374449</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Triad census is similar:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">triad_census</span>(trade2007.ig)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>sna<span class="sc">::</span><span class="fu">triad.census</span>(gotbook.stat, <span class="at">mode=</span><span class="st">"graph"</span>)  <span class="co"># undirected</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>sna<span class="sc">::</span><span class="fu">triad.census</span>(trade2007.stat)              <span class="co"># directed</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>      <span class="dv">003</span>   <span class="dv">012</span>   <span class="dv">102</span> 021D 021U 021C  111D  111U 030T 030C   <span class="dv">201</span>  120D</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="dv">6225</span> <span class="dv">13655</span> <span class="dv">26489</span> <span class="dv">4225</span> <span class="dv">4657</span> <span class="dv">4821</span> <span class="dv">34812</span> <span class="dv">23635</span> <span class="dv">4374</span>  <span class="dv">537</span> <span class="dv">97088</span> <span class="dv">15073</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>     120U  120C    <span class="dv">210</span>    <span class="dv">300</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="dv">7947</span> <span class="dv">14249</span> <span class="dv">136169</span> <span class="dv">283855</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that the <code>statnet</code> version gives us information about the types of triads as column names in the matrix it returns. The <code>igraph</code> version also breaks them into the 16 categories, but returns them in a fixed order not detailed in its return value (described in its help documentation).</p>
<p>The total number of possible triads in a 298 vertex network is (298 x 297 x 296) / (3 x 2 x 1) - the 3 countdown comes from “triad”. Quads would be (298 x 297 x 296 x 295) / (4 x 3 x 2 x 1).</p>
<section id="transitivity" class="level3">
<h3 class="anchored" data-anchor-id="transitivity">Transitivity</h3>
<p>Transitivity is the percentage of potential connected triads - how many are complete. Basic way in igraph is <code>transitivity()</code>. The statnet version is <code>gtrans()</code>, but it only works in directed networks. <code>print()</code> will say whether the network is directed. (Note: in the tutorial, we see that the climate network IS directed, but it returns a different result than igraph: 0.627 vs 0.724. Not clear why. “it is calculating a transitivity score based on an understanding of network structure rooted in hierarchy”)</p>
<p>Local transitivity is the <code>local clustering coefficient</code> - how many nodes of an ego are connected to each other. Have to unpack this, but the magic is:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(gotbook.ig, <span class="at">type=</span><span class="st">"local"</span>, </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">vids=</span><span class="fu">V</span>(gotbook.ig)[</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"Petyr Baelish"</span>,<span class="st">"Jon Snow"</span>, <span class="st">"Tyrion Lannister"</span>)]) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The global clustering coefficient in igraph is</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(trade2007.ig, <span class="at">type=</span><span class="st">"global"</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.8837142</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The local coefficient is:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(trade2007.ig, <span class="at">type=</span><span class="st">"average"</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.8862707</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Network transitivity in statnet is <code>gtrans()</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gtrans</span>(trade2007.stat)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.9993143</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>igraph</th>
<th>statnet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>global clustering coefficient</td>
<td><code>transitivity(trade2007.ig,  type="global")</code></td>
<td><code>gtrans(trade2007.stat)</code> (directed only)</td>
</tr>
<tr class="even">
<td>local clustering coefficient</td>
<td><code>transitivity(trade2007.ig,  type="local")</code></td>
<td>???</td>
</tr>
<tr class="odd">
<td>average local clustering coefficient</td>
<td><code>transitivity(trade2007.ig,  type="average")</code></td>
<td>???</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="degree" class="level2">
<h2 class="anchored" data-anchor-id="degree">Degree</h2>
<p><code>igraph::degree()</code> and <code>statnet::degree()</code>, and once again they give different results; igraph includes loops, statnet doesn’t. Force igraph to ignore them with <code>loops = FALSE</code>. “Note that setting <code>diag=TRUE</code> in <code>sna::degree</code> does not guarantee equivalence as statnet only single counts the loops in a directed network, while igraph double-counts the loops.”</p>
<p>igraph shows the node names, statnet doesn’t.</p>
<p>Getting the degree of a particular set of nodes in <code>igraph</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> igraph<span class="sc">::</span><span class="fu">degree</span>(trade2007.ig, <span class="at">v =</span> <span class="fu">V</span>(trade2007.ig)[<span class="fu">c</span>(<span class="st">"China"</span>, <span class="st">"Canada"</span>, <span class="st">"United Kingdom"</span>, <span class="st">"Denmark"</span>)])</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>         China         Canada United Kingdom        Denmark </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>           <span class="dv">364</span>            <span class="dv">364</span>            <span class="dv">364</span>            <span class="dv">362</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This can also be done by index, as in:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> igraph<span class="sc">::</span><span class="fu">degree</span>(flo_ig, <span class="at">v =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>Acciaiuoli    Albizzi  Barbadori </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>         <span class="dv">2</span>          <span class="dv">6</span>          <span class="dv">4</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Statnet degrees aren’t named:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> sna<span class="sc">::</span><span class="fu">degree</span>(flo_stat)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>]  <span class="dv">2</span>  <span class="dv">6</span>  <span class="dv">4</span>  <span class="dv">6</span>  <span class="dv">6</span>  <span class="dv">2</span>  <span class="dv">8</span>  <span class="dv">2</span> <span class="dv">12</span>  <span class="dv">2</span>  <span class="dv">6</span>  <span class="dv">0</span>  <span class="dv">6</span>  <span class="dv">4</span>  <span class="dv">8</span>  <span class="dv">6</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">which</span>(sna<span class="sc">::</span><span class="fu">degree</span>(flo_stat) <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">12</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="indegree-and-outdegree-calculations" class="level3">
<h3 class="anchored" data-anchor-id="indegree-and-outdegree-calculations"><em>Indegree</em> and <em>outdegree</em> calculations</h3>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>igraph</th>
<th>statnet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>indegree</td>
<td><code>igraph::degree(climate.ig,mode="in", loops = FALSE)</code></td>
<td><code>sna::degree(climate.stat, cmode="indegree")</code></td>
</tr>
<tr class="even">
<td>outdegree</td>
<td><code>igraph::degree(climate.ig,mode="out", loops = FALSE)</code></td>
<td><code>sna::degree(climate.stat, cmode="outdegree")</code></td>
</tr>
</tbody>
</table>
<p>Code from the tutorial to create <code>data.frame</code>s with degree statistics:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#igraph:</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>trade2007.nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> <span class="fu">V</span>(trade2007.ig)<span class="sc">$</span>name,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">totdegree =</span> igraph<span class="sc">::</span><span class="fu">degree</span>(trade2007.ig, <span class="at">loops =</span> <span class="cn">FALSE</span>),</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">indegree =</span> igraph<span class="sc">::</span><span class="fu">degree</span>(trade2007.ig, <span class="at">mode =</span> <span class="st">"in"</span>, <span class="at">loops =</span> <span class="cn">FALSE</span>),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">outdegree =</span> igraph<span class="sc">::</span><span class="fu">degree</span>(trade2007.ig, <span class="at">mode =</span> <span class="st">"out"</span>, <span class="at">loops =</span> <span class="cn">FALSE</span>))</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">#statnet version:</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>trade2007.nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> trade2007.stat<span class="sc">%v%</span><span class="st">"vertex.names"</span>,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">totdegree =</span> sna<span class="sc">::</span><span class="fu">degree</span>(trade2007.stat),</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">indegree =</span> sna<span class="sc">::</span><span class="fu">degree</span>(trade2007.stat, <span class="at">cmode =</span> <span class="st">"indegree"</span>),</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">outdegree =</span> sna<span class="sc">::</span><span class="fu">degree</span>(trade2007.stat, <span class="at">cmode =</span> <span class="st">"outdegree"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="components" class="level2">
<h2 class="anchored" data-anchor-id="components">Components</h2>
<p>Shortest path length between 2 nodes: igraph <code>distances()</code> does this.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">distances</span>(gotbook.ig,<span class="st">"Petyr Baelish"</span>,<span class="st">"Robb Stark"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate distance using unweighted edges</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">distances</span>(gotbook.ig,<span class="st">"Petyr Baelish"</span>,<span class="st">"Robb Stark"</span>, <span class="at">weights=</span><span class="cn">NA</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># list shortest paths between 2 nodes</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">all_shortest_paths</span>(gotbook.ig,<span class="st">"Bronn"</span>,<span class="st">"Varys"</span>, <span class="at">weights=</span><span class="cn">NA</span>)<span class="sc">$</span>res</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">#find average shortest path for network</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">average.path.length</span>(gotbook.ig,<span class="at">directed=</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Component structure and membership</p>
<p><em>Note</em>: a graph is fully connected if its number of components is 1. igraph returns this as the <code>no</code> parameter of <code>igraph::components()</code>; it appears that statnet has no parallel function, but if the number of isolates is 0, the graph is connected (<code>sna::isolates()</code>).</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What element are returned by components</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(igraph<span class="sc">::</span><span class="fu">components</span>(gotbook.ig))</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of components</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">components</span>(gotbook.ig)<span class="sc">$</span>no </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Size of each component</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">components</span>(gotbook.ig)<span class="sc">$</span>csize </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co"># retrieve the index of isolate nodes</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co"># (nodes with component count of 1 from "components" above)</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="fu">isolates</span>(gotbook.stat)</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="co"># There is no direct command in igraph, but we can do this:</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of the degree of each node in the network</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>deg_counts <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">degree</span>(gotbook.ig, <span class="at">loops =</span> <span class="cn">FALSE</span>)</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="co"># filter and count the nodes with 0 degrees (or any other quantity of interest)</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(deg_counts[deg_counts <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a><span class="co"># subset vertex.names attribute to get names of isolates</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="fu">as.vector</span>(gotbook.stat <span class="sc">%v%</span> <span class="st">'vertex.names'</span>)[<span class="fu">c</span>(<span class="fu">isolates</span>(gotbook.stat))] <span class="sc">%&gt;%</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a><span class="do">##   [1] "Aegon Frey (Jinglebell)"         "Alebelly"                       </span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="do">##   [3] "Alfyn"                           "Allar Deem"                     </span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="do">##   [5] "Antario Jast"                    "Balman Byrch"    </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="graph-density" class="level2">
<h2 class="anchored" data-anchor-id="graph-density">Graph density</h2>
<p>Note: <code>network.density()</code> (statnet) ignores edge values “at present”.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#get network density: igraph</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">graph.density</span>(climate.ig)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.4117647</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#get network density: statnet</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">network.density</span>(climate.stat)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.399654</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Adding <code>loops = TRUE</code> to <code>graph.density()</code> appears to fix the problem and gets the two packages to agree:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">#get network density without loops: igraph</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">graph.density</span>(climate.ig, <span class="at">loops=</span><span class="cn">TRUE</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.399654</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>SO</em>, it’s safest to always do either: - <code>graph.density(climate.ig, loops=TRUE)</code> (igraph), OR - <code>network.density(climate.stat)</code> (statnet)</p>
<p>In statnet, we can get network density with loops (nodes connecting to themselves) omitted:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#get network density without loops: statnet</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gden</span>(climate.stat, <span class="at">diag=</span><span class="cn">FALSE</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.3921569</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="network-degree-centralization" class="level2">
<h2 class="anchored" data-anchor-id="network-degree-centralization">Network degree centralization</h2>
<p>In <code>statnet</code>, call <code>centralization()</code> with the <code>degree</code> function and appropriate parameters for <code>degree</code> in the <code>cmode</code> argument:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">centralization</span>(climate.stat, degree, <span class="at">cmode=</span><span class="st">"indegree"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">centralization</span>(climate.stat, degree, <span class="at">cmode=</span><span class="st">"outdegree"</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">centralization</span>(climate.stat, degree, <span class="at">cmode=</span><span class="st">"freeman"</span>) <span class="co"># default</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Could also call it with other <code>sna</code> functions like <code>betweenness</code>, <code>closeness</code></p>
<p>The <code>igraph</code> version uses <code>centr_degree()</code> and returns an object with several components, of which <code>centralization</code> is one:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">centr_degree</span>(climate.ig, <span class="at">loops =</span> <span class="cn">FALSE</span>, <span class="at">mode =</span> <span class="st">"in"</span>)<span class="sc">$</span>centralization</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">centr_degree</span>(climate.ig, <span class="at">loops =</span> <span class="cn">FALSE</span>, <span class="at">mode =</span> <span class="st">"out"</span>)<span class="sc">$</span>centralization</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="eigenvector-centralization" class="level3">
<h3 class="anchored" data-anchor-id="eigenvector-centralization">Eigenvector centralization</h3>
<p><code>statnet</code> uses <code>evcent()</code> to calculate the eigenvalue centrality score for each node in the network:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">evcent</span>(imf2014.stat, <span class="at">ignore.eval=</span><span class="cn">TRUE</span>)<span class="er">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Eigenvector centrality index for the network:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">centralization</span>(imf2014.stat, evcent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In <code>igraph</code>, a set of eigenvector-related information is created with <code>centr_eigen()</code>:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If the network is directed, specify "directed - T" - will not auto-detect</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>eigen_info <span class="ot">&lt;-</span> <span class="fu">centr_eigen</span>(imf2014.ig, <span class="at">directed =</span> T)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Centrality score for node 3:</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>eigen_info[<span class="dv">3</span>]<span class="sc">$</span>vector</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Eigenveector centrality index for the network:</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>eigen_info<span class="sc">$</span>centralization</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>The scores calculated by <code>igraph</code> and <code>statnet</code> are different. We aren’t sure why.</strong> It appears that igraph <a href="https://stackoverflow.com/questions/21035598/what-is-evcent-returning-for-directed-graphs">counts incoming ties to calculate eigenvector centrality</a>, and statnet <a href="http://mailman13.u.washington.edu/pipermail/statnet_help/2015/002170.html">recommends using Bonachic power instead for directed networks</a>.</p>
</section>
<section id="bonacich-power-centrality" class="level3">
<h3 class="anchored" data-anchor-id="bonacich-power-centrality">Bonacich Power Centrality</h3>
<p><code>igraph</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">power_centrality</span>(imf2014.ig)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>statnet</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bonpow</span>(imf2014.stat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Again, there appear to be some inconsistency between <code>igraph</code> and <code>statnet</code> in the calculations, with statnet apparently not incorporating weights and failing on singular matrices.</p>
</section>
<section id="derived-and-reflected-centrality" class="level3">
<h3 class="anchored" data-anchor-id="derived-and-reflected-centrality">Derived and Reflected Centrality</h3>
<p>There are no library routines for these calculations. Convert the data to a matrix first:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>mat2014 <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">as_adjacency_matrix</span>(imf2014.ig, <span class="at">attr=</span><span class="st">"weight"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p>To calculate the proportion of centrality that is received, we first square the adjacency matrix. The diagonal of the adjacency matrix is equal to the the square of node degree. We then divide this diagonal (sqared degree) by total sqaured indegree (calculated by rowSums) to get the proportion of received centrality.</p>
</blockquote>
<div class="sourceCode" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># square the adjacency matrix</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>mat2014sq <span class="ot">&lt;-</span> <span class="fu">t</span>(mat2014) <span class="sc">%*%</span> mat2014</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the proportion of reflected centrality.</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>imf2014.nodes<span class="sc">$</span>rc <span class="ot">&lt;-</span> <span class="fu">diag</span>(mat2014sq) <span class="sc">/</span> <span class="fu">rowSums</span>(mat2014sq)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># freplace missing values with 0</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>imf2014.nodes<span class="sc">$</span>rc <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.nan</span>(imf2014.nodes<span class="sc">$</span>rc), <span class="dv">0</span>, imf2014.nodes<span class="sc">$</span>rc)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate received eigenvalue centrality</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>imf2014.nodes<span class="sc">$</span>eigen.rc <span class="ot">&lt;-</span> imf2014.nodes<span class="sc">$</span>eigen <span class="sc">*</span> imf2014.nodes<span class="sc">$</span>rc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p>If total centraltiy is 1, then derived centrality is simply 1 - the proportion of eigenvector centrality due to received centrality.</p>
</blockquote>
<div class="sourceCode" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the proportion of derived centrality.</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>imf2014.nodes<span class="sc">$</span>dc <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">diag</span>(mat2014sq) <span class="sc">/</span> <span class="fu">rowSums</span>(mat2014sq)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># replace missing values with 0</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>imf2014.nodes<span class="sc">$</span>dc <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.nan</span>(imf2014.nodes<span class="sc">$</span>dc), <span class="dv">1</span>, imf2014.nodes<span class="sc">$</span>dc)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate received eigenvalue centrality</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>imf2014.nodes<span class="sc">$</span>eigen.dc <span class="ot">&lt;-</span> imf2014.nodes<span class="sc">$</span>eigen <span class="sc">*</span> imf2014.nodes<span class="sc">$</span>dc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="week-5-big-block-of-basic-code" class="level2">
<h2 class="anchored" data-anchor-id="week-5-big-block-of-basic-code">Week 5: Big Block of Basic Code</h2>
<p>Big Blocks of Basic Code to get a bunch of measures of a network:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the basic stuff we can do all at once with igraph</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>climinfl.nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">name      =</span> <span class="fu">V</span>(climinfl.ig)<span class="sc">$</span>name,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">totdegree =</span> igraph<span class="sc">::</span><span class="fu">degree</span>(climinfl.ig, <span class="at">loops=</span><span class="cn">FALSE</span>),</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">indegree  =</span> igraph<span class="sc">::</span><span class="fu">degree</span>(climinfl.ig, <span class="at">mode=</span><span class="st">"in"</span>, <span class="at">loops=</span><span class="cn">FALSE</span>),</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">outdegree =</span> igraph<span class="sc">::</span><span class="fu">degree</span>(climinfl.ig, <span class="at">mode=</span><span class="st">"out"</span>, <span class="at">loops=</span><span class="cn">FALSE</span>),</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">eigen     =</span> <span class="fu">centr_eigen</span>(climinfl.ig, <span class="at">directed =</span> T)<span class="sc">$</span>vector,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">bonanich  =</span> <span class="fu">power_centrality</span>(climinfl.ig),</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">centr_clo =</span> igraph<span class="sc">::</span><span class="fu">closeness</span>(climinfl.ig),</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">centr_btw =</span> igraph<span class="sc">::</span><span class="fu">betweenness</span>(climinfl.ig, <span class="at">directed =</span> <span class="cn">FALSE</span>),</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># igraph only</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">burt      =</span> <span class="fu">constraint</span>(climinfl.ig)</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Network-level measures:</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   closeness centralization</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>climinfl.centr_clo <span class="ot">=</span> <span class="fu">centr_clo</span>(climpref.ig)<span class="sc">$</span>centralization</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   betweenness centralization</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>climinfl.centr_btw <span class="ot">=</span> <span class="fu">centr_betw</span>(climpref.ig, <span class="at">directed =</span> <span class="cn">FALSE</span>)<span class="sc">$</span>centralization</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a><span class="co"># statnet version</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>climinfl.nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">name      =</span> climinfl.stat <span class="sc">%v%</span> <span class="st">"vertex.names"</span>,</span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">totdegree =</span> sna<span class="sc">::</span><span class="fu">degree</span>(climinfl.stat),</span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">indegree  =</span> sna<span class="sc">::</span><span class="fu">degree</span>(climinfl.stat, <span class="at">cmode =</span> <span class="st">"indegree"</span>),</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">outdegree =</span> sna<span class="sc">::</span><span class="fu">degree</span>(climinfl.stat, <span class="at">cmode =</span> <span class="st">"outdegree"</span>),</span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">eigen     =</span> sna<span class="sc">::</span><span class="fu">evcent</span>(climinfl.stat, <span class="at">ignore.eval =</span> <span class="cn">TRUE</span>),</span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">bonanich  =</span> sna<span class="sc">::</span><span class="fu">bonpow</span>(climinfl.stat),</span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">centr_clo =</span> sna<span class="sc">::</span><span class="fu">closeness</span>(climinfl.stat, <span class="at">gmode =</span> <span class="st">"graph"</span>,</span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>                               <span class="at">cmode =</span> <span class="st">"suminvundir"</span>),</span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">centr_btw =</span> sna<span class="sc">::</span><span class="fu">betweenness</span>(climinfl.stat, <span class="at">gmode =</span> <span class="st">"graph"</span>)</span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Network-level measures:</span></span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a><span class="co">#   closeness centralization</span></span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a>climinfl.centr_clo <span class="ot">=</span> <span class="fu">centralization</span>(climinfl.stat, sna<span class="sc">::</span>closeness, <span class="at">mode =</span> <span class="st">"graph"</span>)</span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a><span class="co">#   betweenness centralization</span></span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a>climinfl.centr_btw <span class="ot">=</span> <span class="fu">centralization</span>(climinfl.stat, sna<span class="sc">::</span>betweenness, <span class="at">mode =</span> <span class="st">"graph"</span>)</span>
<span id="cb39-37"><a href="#cb39-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-38"><a href="#cb39-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Statnet-only: Gould-Fernandez Brokerage</span></span>
<span id="cb39-39"><a href="#cb39-39" aria-hidden="true" tabindex="-1"></a><span class="co"># replace ATTR with the vector of the desired attribute, such as</span></span>
<span id="cb39-40"><a href="#cb39-40" aria-hidden="true" tabindex="-1"></a><span class="co"># `climinfl.nodes$orgtype5`</span></span>
<span id="cb39-41"><a href="#cb39-41" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">brokerage</span>(climinfl.stat, <span class="at">cl =</span> ATTR)<span class="sc">$</span>z.nli)</span>
<span id="cb39-42"><a href="#cb39-42" aria-hidden="true" tabindex="-1"></a>climinfl.nodes <span class="ot">&lt;-</span> climinfl.nodes <span class="sc">%&gt;%</span></span>
<span id="cb39-43"><a href="#cb39-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">broker.tot =</span> temp<span class="sc">$</span>t,</span>
<span id="cb39-44"><a href="#cb39-44" aria-hidden="true" tabindex="-1"></a>         <span class="at">broker.coord =</span> temp<span class="sc">$</span>w_I,</span>
<span id="cb39-45"><a href="#cb39-45" aria-hidden="true" tabindex="-1"></a>         <span class="at">broker.itin =</span> temp<span class="sc">$</span>w_O,</span>
<span id="cb39-46"><a href="#cb39-46" aria-hidden="true" tabindex="-1"></a>         <span class="at">broker.rep =</span> temp<span class="sc">$</span>b_IO,</span>
<span id="cb39-47"><a href="#cb39-47" aria-hidden="true" tabindex="-1"></a>         <span class="at">broker.gate =</span> temp<span class="sc">$</span>b_OI,</span>
<span id="cb39-48"><a href="#cb39-48" aria-hidden="true" tabindex="-1"></a>         <span class="at">broker.lia =</span> temp<span class="sc">$</span>b_O)</span>
<span id="cb39-49"><a href="#cb39-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-50"><a href="#cb39-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculated measures not specific to igraph or statnet:</span></span>
<span id="cb39-51"><a href="#cb39-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Build the derived and reflected centrality (dc/rc) measures</span></span>
<span id="cb39-52"><a href="#cb39-52" aria-hidden="true" tabindex="-1"></a><span class="co"># "To calculate the proportion of centrality that is received, we first</span></span>
<span id="cb39-53"><a href="#cb39-53" aria-hidden="true" tabindex="-1"></a><span class="co"># square the adjacency matrix. The diagonal of the adjacency matrix is</span></span>
<span id="cb39-54"><a href="#cb39-54" aria-hidden="true" tabindex="-1"></a><span class="co"># equal to the the square of node degree. We then divide this diagonal</span></span>
<span id="cb39-55"><a href="#cb39-55" aria-hidden="true" tabindex="-1"></a><span class="co"># (squared degree) by total squared indegree (calculated by rowSums) to get</span></span>
<span id="cb39-56"><a href="#cb39-56" aria-hidden="true" tabindex="-1"></a><span class="co"># the proportion of received centrality."</span></span>
<span id="cb39-57"><a href="#cb39-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-58"><a href="#cb39-58" aria-hidden="true" tabindex="-1"></a>mat_climinfl <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">as_adjacency_matrix</span>(climinfl.ig))  <span class="co"># not " attr='weight'"</span></span>
<span id="cb39-59"><a href="#cb39-59" aria-hidden="true" tabindex="-1"></a>mat_climinfl_sq <span class="ot">&lt;-</span> <span class="fu">t</span>(mat_climinfl) <span class="sc">%*%</span> mat_climinfl</span>
<span id="cb39-60"><a href="#cb39-60" aria-hidden="true" tabindex="-1"></a><span class="co"># alternately:</span></span>
<span id="cb39-61"><a href="#cb39-61" aria-hidden="true" tabindex="-1"></a>mat_climinfl <span class="ot">&lt;-</span> <span class="fu">as.matrix.network</span>(climinfl.stat, <span class="at">attr =</span> <span class="st">"weight"</span>)</span>
<span id="cb39-62"><a href="#cb39-62" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(mat_climinfl) <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb39-63"><a href="#cb39-63" aria-hidden="true" tabindex="-1"></a>mat_climinfl_sq <span class="ot">&lt;-</span> mat_climinfl <span class="sc">%*%</span> mat_climinfl</span>
<span id="cb39-64"><a href="#cb39-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-65"><a href="#cb39-65" aria-hidden="true" tabindex="-1"></a>climinfl.nodes<span class="sc">$</span>rc <span class="ot">&lt;-</span> <span class="fu">diag</span>(mat_climinfl_sq) <span class="sc">/</span> <span class="fu">rowSums</span>(mat_climinfl_sq)</span>
<span id="cb39-66"><a href="#cb39-66" aria-hidden="true" tabindex="-1"></a><span class="co"># replace missing values with 0</span></span>
<span id="cb39-67"><a href="#cb39-67" aria-hidden="true" tabindex="-1"></a>climinfl.nodes<span class="sc">$</span>rc <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.nan</span>(climinfl.nodes<span class="sc">$</span>rc), <span class="dv">0</span>, climinfl.nodes<span class="sc">$</span>rc)</span>
<span id="cb39-68"><a href="#cb39-68" aria-hidden="true" tabindex="-1"></a>climinfl.nodes<span class="sc">$</span>dc <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> climinfl.nodes<span class="sc">$</span>rc</span>
<span id="cb39-69"><a href="#cb39-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-70"><a href="#cb39-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Build the derived and reflected eigenvector measures</span></span>
<span id="cb39-71"><a href="#cb39-71" aria-hidden="true" tabindex="-1"></a>climinfl.nodes<span class="sc">$</span>eigen.rc <span class="ot">&lt;-</span> climinfl.nodes<span class="sc">$</span>eigen <span class="sc">*</span> climinfl.nodes<span class="sc">$</span>rc</span>
<span id="cb39-72"><a href="#cb39-72" aria-hidden="true" tabindex="-1"></a>climinfl.nodes<span class="sc">$</span>eigen.dc <span class="ot">&lt;-</span> climinfl.nodes<span class="sc">$</span>eigen <span class="sc">*</span> climinfl.nodes<span class="sc">$</span>dc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="closeness-centrailty" class="level3">
<h3 class="anchored" data-anchor-id="closeness-centrailty">Closeness centrailty</h3>
<p>From text: “The closeness centrality of a node is defined as the sum of the geodesic distances between that node and all other nodes in a network.”</p>
<p>Both are called in the above blocks, with <code>sna::closeness()</code> or <code>igraph::closeness()</code> on the respective network object.</p>
<p>From igraph::closeness help: “Closeness centrality measures how many steps is required to access every other vertex from a given vertex.”</p>
<p>igraph and statnet have very different implementations, with options that have to be carefully set.</p>
<section id="igraph-1" class="level4">
<h4 class="anchored" data-anchor-id="igraph-1">igraph</h4>
<p>igraph uses inverse closeness.</p>
<p>For directed networks, use <code>mode=("in", "out", "all", "total")</code>, describing the path type; <code>in</code> is paths <em>to</em> a vertex, <code>out</code> is paths <em>from</em> a vertex. Undirected networks ignore this parameter. It will use the “weight” edge attribute automatically if it’s there, or can be overriden with something else.</p>
</section>
<section id="statnet-1" class="level4">
<h4 class="anchored" data-anchor-id="statnet-1">statnet</h4>
<p>Must specify <code>gmode</code> (type of graph) as <code>graph</code> (undirected) or <code>digraph</code> (directed, default). <code>cmode</code> (type of closeness centrality being measured) is one of: <code>directed</code>, <code>undirected</code> (both standard closeness), <code>suminvdir</code> (directed case) and <code>suminvundir</code> (undirected case), and <code>gil-schmidt</code> for that. The <code>suminv</code> options correspond to igraph’s default inversion, though they’re still calculated slightly differently, so they’re generally preferred.</p>
<p>statnet ignores the edge weights by default; <code>ignore.eval = FALSE</code> to use them, according to the documentation, but the results appear not to use them.</p>
<p><code>sna::closeness(climpref.stat, gmode="graph", cmode="suminvundir", ignore.eval=FALSE))</code></p>
</section>
</section>
<section id="closeness-centralization" class="level3">
<h3 class="anchored" data-anchor-id="closeness-centralization">Closeness centralization</h3>
<p>Closeness centralization is the network-level measure of the <em>closeness centrality</em> node-level measure.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>climinfl.centr_clo <span class="ot">=</span> <span class="fu">centr_clo</span>(climpref.ig)<span class="sc">$</span>centralization</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>climinfl.centr_clo <span class="ot">=</span> <span class="fu">centralization</span>(climinfl.stat, <span class="at">FUN =</span> <span class="st">"closeness"</span>, <span class="at">mode =</span> <span class="st">"graph"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="betweenness-centrality" class="level3">
<h3 class="anchored" data-anchor-id="betweenness-centrality">Betweenness centrality</h3>
<p>Betweenness centrality is the node-level measure of the number of geodesics (shortest path between two nodes) on which a node sits. A high betweenness centrality measure means a node is on many shortest-paths, suggesting a measure of influence or power.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">betweenness</span>(climpref.ig, <span class="at">directed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>sna<span class="sc">::</span><span class="fu">betweenness</span>(climpref.ig, <span class="at">gmode =</span> <span class="st">"graph"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The igraph version <code>directed</code> argument, for whether or not direction should be considered, defaults to <code>TRUE</code>; it might be wondered why it doesn’t read the directedness of the graph as a default, but oh well.</p>
<p>The statnet version would use <code>gmode</code> of <code>digraph</code> for a directed network, and <code>cmode</code> for a variant undirected form; see <code>?sna::betweenness</code> for more. Statnet appears to use weights by default; <code>weights = NA</code> disables weights in igraph.</p>
</section>
<section id="betweenness-centralization" class="level3">
<h3 class="anchored" data-anchor-id="betweenness-centralization">Betweenness centralization</h3>
<p>The network-level measure of betweenness centralization represents <a href="https://en.wikipedia.org/wiki/Centrality#Freeman_centralization">Freeman centralization</a>, at least according to the statnet documentation.</p>
<p>This is a “a measure of how central its most central node is in relation to how central all the other nodes are”.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>climinfl.centr_btw <span class="ot">=</span> <span class="fu">centr_betw</span>(climpref.ig, <span class="at">directed =</span> <span class="cn">FALSE</span>)<span class="sc">$</span>centralization</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>climinfl.centr_btw <span class="ot">=</span> <span class="fu">centralization</span>(climpref.stat, <span class="at">FUN =</span> <span class="st">"betweenness"</span>, <span class="at">mode =</span> <span class="st">"graph"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="burts-network-constraint" class="level3">
<h3 class="anchored" data-anchor-id="burts-network-constraint">(Burt’s) network constraint</h3>
<p>igraph-only function measuring a node’s connection redundancy from 0 (none) to 1. Uses weights.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">constraint</span>(climinfl.ig)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="gould-fernandez-brokerage" class="level3">
<h3 class="anchored" data-anchor-id="gould-fernandez-brokerage">Gould-Fernandez Brokerage</h3>
<p>(Statnet-only)</p>
<p>From <code>?brokerage()</code>: “Gould and Fernandez (following Marsden and others) describe brokerage as the role played by a social actor who mediates contact between two alters.”</p>
<p>Requires a directed network with a vertex attribute used for grouping. Returns a structure with a lot of information; tutorial refers mainly to <code>znli</code> containing the following roles:</p>
<table class="table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>prefix</th>
<th>Role</th>
<th>Action</th>
<th>Path</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>w_I</td>
<td>Coordinator</td>
<td>mediates contact between two individuals from his or her own group.</td>
<td>A -&gt; A -&gt; A</td>
</tr>
<tr class="even">
<td>w_O</td>
<td>Itinerant broker</td>
<td>mediates contact between two individuals from a single group to which he or she does not belong.</td>
<td>A -&gt; B -&gt; A</td>
</tr>
<tr class="odd">
<td>b_{OI}</td>
<td>Gatekeeper</td>
<td>mediates an incoming contact from an out-group member to an in-group member.</td>
<td>A -&gt; B -&gt; B</td>
</tr>
<tr class="even">
<td>b_{IO}</td>
<td>Representative</td>
<td>mediates an outgoing contact from an in-group member to an out-group member.</td>
<td>A -&gt; A -&gt; B</td>
</tr>
<tr class="odd">
<td>b_O</td>
<td>Liaison</td>
<td>mediates contact between two individuals from different groups, neither of which is the group to which he or she belongs.</td>
<td>A -&gt; B -&gt; C</td>
</tr>
<tr class="even">
<td>t</td>
<td>Total</td>
<td>Total (cumulative) brokerage role occupancy</td>
<td>(Any two)</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">brokerage</span>(climinfl.stat, <span class="at">cl =</span> climinfl.nodes<span class="sc">$</span>orgtype5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="week-6" class="level2">
<h2 class="anchored" data-anchor-id="week-6">Week 6</h2>
<p>(All statnet unless otherwise specified)</p>
<p>Calculating structural equivalence (“SE clusters”): look for nodes that have the same pattern of ties with the same neighbors, like siblings of a parent. Unexplained distance functions include “hamming”, “correlation”, “gamma”. The <code>sedist()</code> function ignores edge values (weights?).</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>flomarr.se <span class="ot">&lt;-</span> <span class="fu">equiv.clust</span>(flomarr.stat, <span class="at">equiv.fun =</span> <span class="st">"sedist"</span>, <span class="at">method =</span> <span class="st">"hamming"</span>, <span class="at">mode =</span> <span class="st">"graph"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The output of <code>equiv.clust()</code> can be plotted as a “Cluster Dendogram”:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>flomarr.se <span class="ot">&lt;-</span> <span class="fu">equiv.clust</span>(flomarriage, <span class="at">equiv.fun =</span> <span class="st">"sedist"</span>, <span class="at">method =</span> <span class="st">"hamming"</span>, <span class="at">mode =</span> <span class="st">"graph"</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(flomarr.se,<span class="at">labels =</span> flomarr.se<span class="sc">$</span>glabels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Annoyingly, the different <code>cluster.method</code>s “single, average, or ward.D” are not explained in the tutorial. The default is “complete”.</p>
<p><code>rect.hclust()</code> (visually) “cuts” the diagram at a given height, making separate clusters:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(flomarr.se, <span class="at">labels =</span> flomarr.se<span class="sc">$</span>glabels)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rect.hclust</span>(flomarr.se<span class="sc">$</span>cluster, <span class="at">h =</span> <span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>flomarr.se <span class="ot">&lt;-</span> <span class="fu">equiv.clust</span>(flomarriage, <span class="at">equiv.fun =</span> <span class="st">"sedist"</span>, <span class="at">cluster.method =</span> <span class="st">"single"</span>,</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">method =</span> <span class="st">"hamming"</span>, <span class="at">mode =</span> <span class="st">"graph"</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(flomarr.se,<span class="at">labels =</span> flomarr.se<span class="sc">$</span>glabels)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© Copyright 2022 Steve Linberg. Except where otherwise noted, all text and images licensed CC-BY-NC 4.0</div>   
  </div>
</footer>



</body></html>